@using TodoListApp.WebApi.Models.Tasks;
@model TodoListApp.WebApi.Models.Tasks.TaskDetailsDto

@{
    ViewData["Title"] = "Task Details";
    var colors = new List<string> { "#ffe066", "#c0eb75", "#74c0fc", "#b197fc", "#faa2c1", "#868e96" };
    int colorIndex = 0;
}
@section Styles {
    <link rel="stylesheet" type="text/css" href="~/css/taskdetails.css?v=@DateTime.Now.Ticks" />
}

<div class="container">
    <h1 class="mb-5">@Model.Title</h1>
    <div class="row mb-3">
        <h5 class="col-sm-4 fw-bold">Status</h5>
        <p class="col-sm-8 ">
            <span class="status-badge status-@Model.Status.ToString().ToLower()">
            @Model.Status
            </span>
            </p>
    </div>
    <div class="row mb-3">
        <h5 class="col-sm-4 fw-bold">Due Date</h5>
        <p class="col-sm-8 @(Model.Status != Status.Completed && Model.IsExpired ? "expired-date" : "")">
            @if (Model.DueDate.HasValue)
            {
                @Model.DueDate.Value.ToString("MMMM dd, yyyy")
            }
            else
            {
                <span class="no-due-date">No due date set</span>
            }
        </p>
    </div>
    <div class="row mb-3">
        <h5 class="col-sm-4 fw-bold">Assigned To</h5>
        <p class="col-sm-8 ">@Model.Assignee</p>
    </div>
    <div class="row mb-3">
        <h5 class="col-sm-4">Tags</h5>
        <div class="col-sm-8">
            @if (Model.Tags != null && Model.Tags.Any())
            {
                foreach (var tag in Model.Tags)
                {
                    <span class="tag-badge" style="background-color: @colors[colorIndex];">@tag.Name</span>
                    colorIndex = (colorIndex + 1) % colors.Count;
                }
            }
            else
            {
                <span>No tags</span>
            }
        </div>
    </div>

    <div>
        <a href="@Url.Action("EditTask", "Task", new { id = Model.Id })" class="btn update-btn mt-1 mb-1">Update Task</a>
    </div>
    <hr class="my-4">

    <h4 class="my-4">Description</h4>
    <div>
        @Model.Description
    </div>
</div>
